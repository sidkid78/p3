# Execution Plan

## Observations

- Analyzed list_directory with {'path': 'specs', 'recursive': True}
- Analyzed read_file with {'path': 'specs\\current\\stitch_passy_planner_dashboard\\passy_planner_dashboard_1\\code.html'}
- Analyzed read_file with {'path': 'specs\\current\\stitch_passy_planner_dashboard\\guest_rsvp_manager\\code.html'}
- Analyzed read_file with {'path': 'specs\\current\\stitch_passy_planner_dashboard\\ai_theme_assistant_1\\code.html'}
- Analyzed list_directory with {'path': '.'}
- Analyzed list_directory with {'recursive': True, 'path': 'passy'}
- Analyzed list_directory with {'path': 'passy'}
- Analyzed read_file with {'path': 'passy\\package.json'}
- Analyzed list_directory with {'path': 'passy\\app', 'recursive': True}
- Analyzed read_file with {'path': 'passy\\app\\dashboard\\page.tsx'}
- Analyzed read_file with {'path': 'passy\\app\\globals.css'}
- Analyzed list_directory with {'recursive': True, 'path': 'passy\\lib'}
- Analyzed list_directory with {'path': 'passy\\types'}
- Analyzed read_file with {'path': 'passy\\README.md'}

- ## Project Analysis Summary

The project consists of a sophisticated event planning platform named **Passy**, specifically focused on AI-powered baby shower planning. It follows a modern development workflow where detailed UI/UX prototypes are maintained in a `specs/` directory before being implemented in the core Next.js application located in the `passy/` directory.

### 1. Project Structure

- **`specs/current/stitch_passy_planner_dashboard/`**: Contains feature-specific directories (e.g., `guest_rsvp_manager`, `ai_theme_assistant_1`). Each directory includes:
  - `code.html`: A self-contained mockup using HTML, Tailwind CSS, and minimal JS.
  - `screen.png`: A visual reference for the intended UI.
- **`passy/`**: The implementation-ready Next.js application.
  - `app/`: Next.js App Router structure (Dashboard, Login, Auth).
  - `lib/`: Core utilities, including Supabase client/server configurations.
  - `types/`: TypeScript definitions, specifically for the Supabase database schema.

### 2. Key Components

- **Planner Dashboard**: Central hub showing event progress, upcoming tasks, and quick stats.
- **AI Theme Assistant**: A conversational interface (integrated with Gemini AI) to help users visualize and generate event themes.
- **Guest & RSVP Manager**: Comprehensive tool for managing invitations, tracking statuses, and dietary requirements.
- **Invitation Editor**: A visual editor for creating and password-protecting digital invitations.
- **Onboarding Journey**: A guided setup process for new users to define their event goals and style.
- **Vendor & Task Management**: Systems for interacting with vendor marketplaces and managing planning checklists.

### 3. Architecture Patterns

- **Frontend**: Next.js (App Router) with React 19.
- **Styling Architecture**: A "Glassmorphism" design system implemented via Tailwind CSS 4. It uses semi-transparent backgrounds, heavy backdrop blurs, and neon accents.
- **Backend-as-a-Service**: Supabase is used for Authentication, Database management, and potentially Edge Functions for AI integration.
- **AI-Driven UX**: Features are built around AI assistance, requiring integration with LLMs (like Gemini) and image generation models (like Imagen).

### 4. Technology Stack

- **Framework**: Next.js 15+
- **Language**: TypeScript
- **Styling**: Tailwind CSS 4
- **Icons & Fonts**: Material Symbols Outlined; Google Fonts (Playfair Display, PT Sans, Inter).
- **Backend/Auth**: Supabase

### 5. Important Details for Development

- **Design System Porting**: The glassmorphism styles in the `specs` prototypes need to be abstracted into reusable Tailwind utility classes or React components within the `passy/` app.
- **Componentization**: Developers should break down the monolithic `code.html` files into granular React components (e.g., `StatCard`, `GlassPane`, `ChatBubble`).
- **Data Binding**: The static values in mockups must be replaced with real-time data from Supabase.
- **Mobile Responsiveness**: While the mockups provide a starting point, implementation must ensure full responsiveness using Tailwind's breakpoint utilities.

---

## Recommended Approach

The immediate focus should be on building a functional version of the **Planner Dashboard** by porting the high-fidelity design from `specs` into the Next.js environment. This involves setting up the global theme and then building the UI in a component-first manner.

## Detailed Execution Plan

### Phase 1: Foundation & Styling

1. **Global Theme Setup**: Extract colors, fonts, and custom glassmorphism CSS from `specs/current/stitch_passy_planner_dashboard/passy_planner_dashboard_1/code.html`.
2. **Tailwind Configuration**: Update `passy/app/globals.css` to include the glassmorphism utility classes (`.glass-card`, `.glass-sidebar`, etc.) and define the custom color palette (lavender, primary-dark, etc.).
3. **Asset Management**: Set up Google Fonts and Material Symbols in the root `layout.tsx`.

### Phase 2: Core UI Components

1. **Layout Components**:
    - Create a `DashboardLayout` component in `passy/app/dashboard`.
    - Implement a `Sidebar` with navigation links matching the specs.
    - Implement a `Header` with search and user profile integration.
2. **Atom Components**:
    - Create a `GlassCard` wrapper component.
    - Create a `StatCard` for the guest/budget/countdown display.
    - Create a `TaskItem` component for the checklist section.

### Phase 3: Dashboard Implementation

1. **Page Construction**: Assemble the `passy/app/dashboard/page.tsx` using the created components.
2. **Data Fetching**: Use Supabase server components to fetch real user data (e.g., username, event date, guest count) to replace mockup placeholders.
3. **Progress Visualization**: Implement the "Planning Progress" bar and status badges using the dynamic data.

### Phase 4: Validation & Refining

1. **Visual Audit**: Compare the rendered Next.js page against `passy_planner_dashboard_1/screen.png`.
2. **Interactivity**: Add basic transitions and hover effects as defined in the prototypes.

## Potential Challenges & Solutions

- **Tailwind 4 Syntax**: The `passy` app uses Tailwind 4 which has different configuration patterns than the CDN version used in `specs`.
  - *Solution*: Use the `@theme` block in CSS for custom values instead of a `tailwind.config.js`.
- **SSR Hydration with Glassmorphism**: Heavy use of `backdrop-blur` and complex gradients can sometimes cause flickers or performance issues on slow devices.
  - *Solution*: Optimize CSS and ensure styles are loaded correctly in the critical path; use CSS variables for dynamic theme values.
- **AI Integration Complexity**: Real AI interactions are more complex than the static chat bubbles in mockups.
  - *Solution*: Start with a UI-only implementation of the AI Assistant and use mock streaming responses before connecting to a real Gemini API endpoint.
- Analyzed list_directory with {'path': '.'}
- Analyzed list_directory with {'path': 'specs'}
- Analyzed list_directory with {'path': 'specs/current'}
- Analyzed read_file with {'path': 'specs/current/info.md'}
- Analyzed task_create with {'depends_on': [], 'description': "Setup Next.js with TypeScript and Tailwind CSS. Implement the strict 'Passy' visual identity codex. \nThis includes:\n- Defining custom color palette (Charcoal #120c1c, Lavender, Neon-Green) in `tailwind.config.ts`.\n- Configuring backdrop-blur utilities and global styles in `src/app/globals.css`.\n- Creating base UI components: `src/components/ui/GlassCard.tsx`, `src/components/ui/GlowingButton.tsx`, `src/components/ui/StatusBadge.tsx`, and `src/components/layout/AtmosphericBackground.tsx`.\n\nOutput files:\n- `tailwind.config.ts`\n- `src/app/globals.css`\n- `src/components/ui/GlassCard.tsx`\n- `src/components/ui/GlowingButton.tsx`\n- `src/components/ui/StatusBadge.tsx`\n- `src/components/layout/AtmosphericBackground.tsx`", 'status': 'pending', 'task_id': 'setup-design-system', 'assigned_agent': 'frontend-architect'}
- Analyzed task_create with {'depends_on': [], 'task_id': 'setup-database', 'assigned_agent': 'backend-builder', 'description': 'Design and apply the SQL schema in Supabase.\nTables required:\n- `profiles` (extends `auth.users`)\n- `events` (date, theme, budget_limit, mood_board_url JSONB)\n- `guests` (RSVP status, dietary needs)\n- `budget_items` (category, estimated, actual, status)\n- `tasks` (timeline, status)\n- `team_members` (RBAC)\n- `saved_vendors`\n\nSetup Row Level Security (RLS) policies for all tables.\nCreate a PostgreSQL trigger to automatically create a profile on user signup.\n\nOutput files:\n- `supabase/schema.sql` (or similar migration/seed script)\n- `src/lib/supabase.ts` (Supabase client configuration)', 'status': 'pending'}
- Analyzed task_create with {'task_id': 'setup-orchestrator', 'status': 'pending', 'description': 'Develop the client-side state management system for navigation.\n- Define `Page` Enum in `src/types/navigation.ts`.\n- Configure `NAV_ITEMS` in `src/constants/navigation.ts`.\n- Build the `Sidebar` component (`src/components/navigation/Sidebar.tsx`) with Glassmorphism styles.\n- Build the `Orchestrator` component (`src/components/navigation/Orchestrator.tsx`) with `AnimatePresence` and conditional rendering.\n\nOutput files:\n- `src/types/navigation.ts`\n- `src/constants/navigation.ts`\n- `src/components/navigation/Sidebar.tsx`\n- `src/components/navigation/Orchestrator.tsx`', 'assigned_agent': 'frontend-architect', 'depends_on': ['setup-design-system']}
- Analyzed task_create with {'status': 'pending', 'task_id': 'setup-ai-services', 'assigned_agent': 'ai-specialist', 'depends_on': ['setup-design-system'], 'description': 'Create server-side utilities (Next.js Server Actions) for Gemini AI:\n- `generateTheme` (returns structured JSON for theme and image prompts)\n- `analyzeBudget` (returns AI Intel cards based on variances)\n- `vendorSearch` (Google Search Grounding integration)\n\nEnsure proper environment variable usage for API keys.\n\nOutput files:\n- `src/lib/ai/gemini-client.ts`\n- `src/app/actions/ai/generate-theme.ts`\n- `src/app/actions/ai/analyze-budget.ts`\n- `src/app/actions/ai/vendor-search.ts`'}
- Analyzed task_create with {'task_id': 'module-theme-assistant', 'status': 'pending', 'description': "Build the `ThemeAssistant` component:\n- Chat interface for theme discovery with Gemini-1.5-flash.\n- Mood Board with specified aspect ratios (4:3 for Venue, 1:1 for others).\n- 'Apply Theme' logic persisting aesthetic choice to `localStorage`.\n- High-fidelity visual styling using Glassmorphism components and Framer Motion.\n\nOutput files:\n- `src/components/planning/ThemeAssistant.tsx`\n- `src/types/theme.ts`\n- `src/components/views/ThemeAssistant.tsx` (to be registered in Orchestrator)", 'assigned_agent': 'frontend-builder', 'depends_on': ['setup-orchestrator', 'setup-ai-services']}
- Analyzed task_create with {'task_id': 'module-budget-guest', 'depends_on': ['setup-database', 'setup-orchestrator'], 'description': 'Develop the `BudgetTracker` and `GuestManager` modules:\n- `BudgetTracker`: Financial health gauge, interactive expense table, and AI Intel cards.\n- `GuestManager`: RSVP tracking, dietary needs, plus-one logic with high-fidelity list view and sliding side-panel.\n- Both must read/write to Supabase using the configured schema.\n\nOutput files:\n- `src/components/budget/BudgetTracker.tsx`\n- `src/components/guests/GuestManager.tsx`\n- `src/components/views/Budget.tsx`\n- `src/components/views/GuestManager.tsx`', 'assigned_agent': 'full-stack-builder', 'status': 'pending'}
- Analyzed task_create with {'task_id': 'module-marketplace-messages', 'assigned_agent': 'frontend-builder', 'depends_on': ['module-theme-assistant'], 'description': 'Develop the `VendorMarketplace` and `MessageCenter`:\n- `VendorMarketplace`: Display grounded search results (Google Search Grounding) with "Matches Theme" badge logic based on active theme tags.\n- `MessageCenter`: Split-pane UI for vendor communications (mocked).\n\nOutput files:\n- `src/components/marketplace/VendorMarketplace.tsx`\n- `src/components/messages/MessageCenter.tsx`\n- `src/components/views/Vendors.tsx`\n- `src/components/views/Messages.tsx`\n- `src/types/vendor.ts`', 'status': 'pending'}
- Analyzed task_list with {}

- # Project Plan - Passy AI Baby Shower Planning Ecosystem

This plan outlines the architecture and implementation of 'Passy', a high-fidelity Baby Shower Planning Ecosystem using Next.js, Supabase, and Google Gemini AI.

## Requirements Analysis

The application is a Single-Page Architecture (SPA) workspace built within Next.js. It features a "Dark Mode Glassmorphism" aesthetic and heavily leverages AI for theme generation, budget optimization, and vendor discovery.

### Key Features

- **Visual Identity:** Deep charcoal background with floating orbs and frosted-glass UI components.
- **SPA Orchestrator:** Fluid navigation within the workspace without full page reloads.
- **Supabase Backend:** Relational schema with RLS for secure event data management.
- **AI Superpowers:**
  - Gemini for theme discovery and budget analysis.
  - Imagen for mood board generation.
  - Google Search Grounding for real-world vendor data.
- **Core Modules:** Theme Assistant, Smart Budget Tracker, Guest Manager, and Vendor Marketplace.

## Subtask Breakdown

### 1. Initialize Project & Glassmorphism Design System

- **Task ID:** `setup-design-system`
- **Agent:** `frontend-architect`
- **Description:** Setup the project foundation with Next.js, TypeScript, and Tailwind. Implement the visual identity codex (colors, global styles, and base glassmorphism components).
- **Outputs:** `tailwind.config.ts`, `src/app/globals.css`, `src/components/ui/*.tsx`, `src/components/layout/AtmosphericBackground.tsx`

### 2. Database Schema & Supabase Configuration

- **Task ID:** `setup-database`
- **Agent:** `backend-builder`
- **Description:** Design and apply the SQL schema in Supabase. Setup tables for profiles, events, guests, budget items, tasks, and vendors. Configure RLS and triggers.
- **Outputs:** `supabase/schema.sql`, `src/lib/supabase.ts`

### 3. Implement SPA Navigation Orchestrator

- **Task ID:** `setup-orchestrator`
- **Agent:** `frontend-architect`
- **Depends on:** `setup-design-system`
- **Description:** Develop the client-side state management for navigation, including the `Page` enum, `Sidebar`, and the root `Orchestrator` component.
- **Outputs:** `src/types/navigation.ts`, `src/components/navigation/Sidebar.tsx`, `src/components/navigation/Orchestrator.tsx`

### 4. Gemini AI Service Integration

- **Task ID:** `setup-ai-services`
- **Agent:** `ai-specialist`
- **Depends on:** `setup-design-system`
- **Description:** Create Next.js Server Actions to interface with Gemini for theme generation, budget analysis, and grounded vendor search.
- **Outputs:** `src/lib/ai/gemini-client.ts`, `src/app/actions/ai/*.ts`

### 5. Develop AI Theme Assistant & Mood Board

- **Task ID:** `module-theme-assistant`
- **Agent:** `frontend-builder`
- **Depends on:** `setup-orchestrator`, `setup-ai-services`
- **Description:** Build the chat interface and mood board component. Integrate with AI services and handle theme persistence.
- **Outputs:** `src/components/planning/ThemeAssistant.tsx`, `src/components/views/ThemeAssistant.tsx`

### 6. Implement Budget Tracker & Guest Manager

- **Task ID:** `module-budget-guest`
- **Agent:** `full-stack-builder`
- **Depends on:** `setup-database`, `setup-orchestrator`
- **Description:** Build the budget tracking and guest management modules, connecting them to the Supabase backend.
- **Outputs:** `src/components/budget/BudgetTracker.tsx`, `src/components/guests/GuestManager.tsx`, `src/components/views/{Budget,GuestManager}.tsx`

### 7. Vendor Marketplace & Messaging

- **Task ID:** `module-marketplace-messages`
- **Agent:** `frontend-builder`
- **Depends on:** `module-theme-assistant`
- **Description:** Build the vendor search interface and the split-pane message center.
- **Outputs:** `src/components/marketplace/VendorMarketplace.tsx`, `src/components/messages/MessageCenter.tsx`, `src/components/views/{Vendors,Messages}.tsx`

## Potential Challenges & Solutions

- **Challenge:** Maintaining state across "pages" in the SPA pattern.
- **Solution:** Use React context or a lightweight state management library if the Orchestrator's state becomes too complex.
- **Challenge:** AI hallucinations in vendor data.
- **Solution:** Strictly use Google Search Grounding as specified in the architecture.
- **Challenge:** Performance of high-fidelity glassmorphism on lower-end devices.
- **Solution:** Optimize backdrop-blur usage and ensure Framer Motion animations are hardware-accelerated.
- Analyzed list_directory with {'path': '.'}
- Analyzed list_directory with {'path': 'specs'}
- Analyzed list_directory with {'path': 'specs/current'}
- Analyzed read_file with {'path': 'specs/current/info.md'}
- Analyzed list_directory with {'path': '.', 'recursive': True}
- Analyzed list_directory with {'path': 'passy'}
- Analyzed list_directory with {'path': 'passy/components'}
- Analyzed list_directory with {'path': 'passy/components/atoms'}
- Analyzed read_file with {'path': 'passy/components/navigation/Orchestrator.tsx'}
- Analyzed list_directory with {'path': 'specs/current/stitch_passy_planner_dashboard'}
- Analyzed read_file with {'path': 'passy/components/planning/ThemeAssistant.tsx'}
- Analyzed read_file with {'path': 'passy/package.json'}
- Analyzed read_file with {'path': 'passy/components/views/BudgetTracker.tsx'}
- Analyzed read_file with {'path': 'passy/tailwind.config.ts'}
- Analyzed read_file with {'path': 'passy/app/globals.css'}
- Analyzed read_file with {'path': 'passy/app/actions/ai/generate-theme.ts'}
- Analyzed list_directory with {'path': 'passy/components/views'}
- Analyzed read_file with {'path': 'passy/lib/ai/gemini-client.ts'}
- Analyzed task_create with {'depends_on': [], 'status': 'pending', 'assigned_agent': 'frontend-architect', 'task_id': 'setup-design-system', 'description': 'Refine the visual identity of Passy. Update globals.css to use charcoal (#120c1c) background and strict glassmorphism spec (backdrop-blur-2xl, bg-white/5, border-white/10). Update atomic components in passy/components/atoms (GlassCard, GlowingButton, StatusBadge) to match these standards. Expected files: passy/app/globals.css, passy/components/atoms/GlassCard.tsx, passy/components/atoms/GlowingButton.tsx, passy/components/atoms/StatusBadge.tsx.'}
- Analyzed task_create with {'assigned_agent': 'backend-engineer', 'task_id': 'supabase-backend', 'description': 'Update and apply the SQL schema in Supabase as defined in info.md. Create tables for Profiles, Events, TeamMembers, Guests, BudgetItems, Tasks, and SavedVendors. Implement RLS policies for team-based access and the handle_new_user trigger. Expected files: passy/supabase/schema.sql (new file to track schema).', 'depends_on': [], 'status': 'pending'}
- Analyzed task_create with {'depends_on': ['setup-design-system'], 'status': 'pending', 'assigned_agent': 'react-architect', 'description': 'Enhance the Orchestrator component to handle state-based navigation using the Page enum. Implement fluid transitions between modules using Framer Motion. Add logic to toggle between Workspace (with Sidebar) and Standalone views (Landing, Invitations). Expected files: passy/types/navigation.ts, passy/components/navigation/Orchestrator.tsx, passy/components/navigation/Sidebar.tsx.', 'task_id': 'spa-orchestrator'}
- Analyzed task_create with {'depends_on': ['setup-design-system'], 'status': 'pending', 'assigned_agent': 'ai-specialist', 'description': 'Setup Gemini 1.5 Flash integration in passy/lib/ai/gemini-client.ts. Implement Next.js Server Actions: generateTheme (returning 5 image prompts: Venue, Table, Invite, Cake, Decor), analyzeBudget (returning AI Intel cards), and vendorSearch (using Google Search Grounding). Expected files: passy/lib/ai/gemini-client.ts, passy/app/actions/ai/generate-theme.ts, passy/app/actions/ai/analyze-budget.ts, passy/app/actions/ai/vendor-search.ts.', 'task_id': 'ai-service-layer'}
- Analyzed task_create with {'status': 'pending', 'depends_on': ['spa-orchestrator', 'ai-service-layer'], 'assigned_agent': 'frontend-specialist', 'description': 'Refine the Theme Assistant module. Update the chat interface and MoodBoard component to support 5 Imagen 4.0 images with specific aspect ratios (4:3 for Venue, 1:1 for others). Implement persistence to localStorage. Expected files: passy/components/planning/ThemeAssistant.tsx, passy/components/planning/MoodBoard.tsx.', 'task_id': 'theme-assistant'}
- Analyzed task_create with {'status': 'pending', 'depends_on': ['supabase-backend', 'spa-orchestrator', 'ai-service-layer'], 'task_id': 'budget-guest-modules', 'description': "Update BudgetTracker to include the 'Financial Health' gauge and 'AI Intel' cards. Update GuestManager to include the sliding side-panel for guest details and RSVP management. Ensure data persistence with Supabase. Expected files: passy/components/views/BudgetTracker.tsx, passy/components/views/GuestManager.tsx.", 'assigned_agent': 'fullstack-developer'}
- Analyzed task_create with {'task_id': 'vendor-marketplace', 'description': "Build the Vendor Marketplace view with grounded search results and 'Matches Theme' logic. Build the Message Center with a split-pane UI for vendor communications. Expected files: passy/components/views/VendorMarketplace.tsx, passy/components/views/MessageCenter.tsx.", 'assigned_agent': 'frontend-specialist', 'status': 'pending', 'depends_on': ['theme-assistant']}
- Analyzed task_list with {}
- Analyzed task_create with {'description': 'Refine the visual identity of Passy. Update globals.css to use charcoal (#120c1c) background and strict glassmorphism spec (backdrop-blur-2xl, bg-white/5, border-white/10) as defined in info.md. Update atomic components in passy/components/atoms (GlassCard, GlowingButton, StatusBadge) to match these standards. Expected files: passy/app/globals.css, passy/components/atoms/GlassCard.tsx, passy/components/atoms/GlowingButton.tsx, passy/components/atoms/StatusBadge.tsx.', 'status': 'pending', 'assigned_agent': 'frontend-architect', 'task_id': 'refine-design-system', 'depends_on': []}
- Analyzed task_get with {'task_id': 'spa-orchestrator'}
- Analyzed task_list with {}
- Analyzed task_create with {'depends_on': ['refine-design-system'], 'description': 'Enhance the Orchestrator component to handle state-based navigation using the Page enum. Implement fluid transitions between modules using Framer Motion. Add logic to toggle between Workspace (with Sidebar) and Standalone views (Landing, Invitations). Expected files: passy/types/navigation.ts, passy/components/navigation/Orchestrator.tsx, passy/components/navigation/Sidebar.tsx.', 'assigned_agent': 'react-architect', 'task_id': 'spa-orchestrator-v2', 'status': 'pending'}
- Analyzed task_create with {'status': 'pending', 'depends_on': ['refine-design-system'], 'description': 'Setup Gemini 1.5 Flash integration in passy/lib/ai/gemini-client.ts. Implement Next.js Server Actions: generateTheme (returning 5 image prompts: Venue, Table, Invite, Cake, Decor), analyzeBudget (returning AI Intel cards), and vendorSearch (using Google Search Grounding). Expected files: passy/lib/ai/gemini-client.ts, passy/app/actions/ai/generate-theme.ts, passy/app/actions/ai/analyze-budget.ts, passy/app/actions/ai/vendor-search.ts.', 'assigned_agent': 'ai-specialist', 'task_id': 'ai-service-layer-v2'}
- I have analyzed the codebase and the requirements specified in `specs/current/info.md`. The project is a high-fidelity Baby Shower Planning Ecosystem called **Passy**, featuring a sophisticated **Dark Mode Glassmorphism** aesthetic and deep **AI integration** with Google Gemini and Imagen.

While the codebase already has several components implemented, there are discrepancies between the current code and the "luxury standards" defined in the latest specifications (e.g., specific background colors, blur levels, and AI model versions).

### Requirements Analysis

* **Visual Identity**: Strict "Dark Mode Glassmorphism" (charcoal `#120c1c`, `backdrop-blur-2xl`, `bg-white/5`, `border-white/10`).
- **Core Architecture**: Single-Page Architecture (SPA) via an `Orchestrator` component and `Page` enum.
- **Backend**: Supabase with relational schema for Events, Guests, Budget, Tasks, and Vendors, including RLS and triggers.
- **AI Layer**: Gemini 1.5 Flash via Server Actions for theme generation (5 image prompts), budget analysis (Intel cards), and grounded vendor search.
- **Key Modules**: AI Theme Assistant, Smart Budget Tracker, Guest Manager, Vendor Marketplace, and Message Center.

### Subtask Breakdown

I have created the following structured subtasks to bring the project in line with the specifications:

1. **`refine-design-system`**: Refine the visual identity. Update `globals.css` and atomic components (`GlassCard`, `GlowingButton`, `StatusBadge`) to the charcoal/glassmorphism spec.
2. **`supabase-backend`**: Update and apply the SQL schema in Supabase. Implement RLS policies and the profile creation trigger.
3. **`spa-orchestrator-v2`**: Enhance the Orchestrator for fluid SPA navigation and handle workspace vs. standalone views.
4. **`ai-service-layer-v2`**: Implement Gemini 1.5 Flash Server Actions for theme, budget, and grounded vendor search.
5. **`theme-assistant`**: Refine the AI Theme discovery chat and the 5-part Mood Board with specific aspect ratios and persistence.
6. **`budget-guest-modules`**: Implement the Financial Health gauge, AI Intel cards, and the Guest Manager with its sliding side-panel.
7. **`vendor-marketplace`**: Build the Vendor Marketplace with theme-matching logic and the split-pane Message Center.

### Dependency Ordering

- Foundation: `refine-design-system`, `supabase-backend`.
- Core Logic: `spa-orchestrator-v2`, `ai-service-layer-v2` (blocked by design system).
- Feature Modules: `theme-assistant`, `budget-guest-modules` (blocked by core logic/backend).
- Final Integration: `vendor-marketplace` (blocked by theme assistant).

### Task List Summary

The complete plan has been registered in the task management system. You can view the full list and dependency graph by calling `task_list`.

A human-readable summary of this plan has been prepared for the `plan.md` file.
